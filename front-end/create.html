<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><title>Create Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-md mx-auto bg-white p-6 rounded shadow">
        <h2 class="text-2xl font-bold mb-4">Add New Profile</h2>
        <form id="createForm" class="space-y-4">
            <input type="text" id="first_name" placeholder="First Name" class="w-full border p-2 rounded" required>
            <input type="text" id="middle_name" placeholder="Middle Name (Optional)" class="w-full border p-2 rounded">
            <input type="text" id="last_name" placeholder="Last Name" class="w-full border p-2 rounded" required>
            <input type="email" id="email" placeholder="Email" class="w-full border p-2 rounded" required>
            <input type="text" id="phone_number" placeholder="Phone" class="w-full border p-2 rounded" required>
            <input type="number" id="age" placeholder="Age" class="w-full border p-2 rounded" required>
            <input type="date" id="date_of_birth" class="w-full border p-2 rounded" required>
            <textarea id="address" placeholder="Address" class="w-full border p-2 rounded" required></textarea>
            <div class="flex gap-2">
                <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Save</button>
                <a href="index.html" class="bg-gray-500 text-white px-4 py-2 rounded text-center w-full">Cancel</a>
            </div>
        </form>
    </div>

    <script>
        document.getElementById('createForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const data = {
                first_name: document.getElementById('first_name').value,
                middle_name: document.getElementById('middle_name').value,
                last_name: document.getElementById('last_name').value,
                email: document.getElementById('email').value,
                phone_number: document.getElementById('phone_number').value,
                age: document.getElementById('age').value,
                date_of_birth: document.getElementById('date_of_birth').value,
                address: document.getElementById('address').value,
            };

            const res = await fetch('http://localhost:8000/api/profiles', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                body: JSON.stringify(data)
            });

            if (res.ok) window.location.href = 'index.html';
            else alert("Error: Check if email is unique");
        });
    </script>
</body>
</html>